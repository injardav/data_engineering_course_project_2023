Fact Tables:
-------------
Publication_Fact:
id (Primary Key)
reference_count
score
doi (Foreign Key referencing Dim_Publication)




Dimension Tables:
-----------------

*Dim_Publication:
pid (Primary Key)
submitter
article_number
title
journal_ref
general_category
type
issue
language
short_container_title
container_title
is_referenced_by_count (current value)
is_current (boolean indicating if the record is current)
start_date (date/time indicating when the record became effective)
end_date (date/time indicating when the record is no longer effective)

*Dim_Authors:

aid (Primary Key)
aff_id (Foreign Key referencing Dim_Author_Affiliation)
first_name
family_name


*Dim_Author_Affiliation:
aff_id (Primary Key)
affiliation
is_current
start_date
end_date

*Dim_Publisher:
pub_id (Primary Key)
publisher_name


*Dim_Publish_SN:
pid (Primary Key, Foreign Key referencing Dim_Publication)
issn_number
issn_type

*Dim_License:
lid (Primary Key)
license_start (datetime)
license_url
license_content_version
license_delay

*Dim_References:
pid (Primary Key, Foreign Key referencing Dim_Publication)
doi
key
doi_asserted_by

*Dim_Pub_Version:
pid (Primary Key, Foreign Key referencing Dim_Publication)
vid
created_time



*******************************************************************************
===============================================================================
*******************************************************************************

Postgre implementation: "undertesting"
-- Create Dimension Tables
CREATE TABLE Dim_Publication (
    pid SERIAL PRIMARY KEY,
    submitter VARCHAR(255),
    article_number VARCHAR(255),
    title VARCHAR(255),
    journal_ref VARCHAR(255),
    general_category VARCHAR(255),
    type VARCHAR(255),
    issue VARCHAR(255),
    language VARCHAR(255),
    short_container_title VARCHAR(255),
    container_title VARCHAR(255),
    is_referenced_by_count INTEGER,
    is_current BOOLEAN,
    start_date TIMESTAMP,
    end_date TIMESTAMP
);

CREATE TABLE Dim_Authors (
    aid SERIAL PRIMARY KEY,
    aff_id INTEGER REFERENCES Dim_Author_Affiliation(aff_id),
    first_name VARCHAR(255),
    family_name VARCHAR(255)
);

CREATE TABLE Dim_Author_Affiliation (
    aff_id SERIAL PRIMARY KEY,
    affiliation VARCHAR(255),
    is_current BOOLEAN,
    start_date TIMESTAMP,
    end_date TIMESTAMP
);

CREATE TABLE Dim_Publisher (
    pub_id SERIAL PRIMARY KEY,
    publisher_name VARCHAR(255)
);

CREATE TABLE Dim_Publish_SN (
    pid INTEGER REFERENCES Dim_Publication(pid),
    issn_number VARCHAR(255),
    issn_type VARCHAR(255),
    PRIMARY KEY (pid, issn_number)
);

CREATE TABLE Dim_License (
    lid SERIAL PRIMARY KEY,
    license_start TIMESTAMP,
    license_url VARCHAR(255),
    license_content_version VARCHAR(255),
    license_delay INTEGER
);

CREATE TABLE Dim_References (
    pid INTEGER REFERENCES Dim_Publication(pid),
    doi VARCHAR(255),
    key VARCHAR(255),
    doi_asserted_by VARCHAR(255),
    PRIMARY KEY (pid, doi)
);

CREATE TABLE Dim_Pub_Version (
    pid INTEGER REFERENCES Dim_Publication(pid),
    vid VARCHAR(255),
    created_time TIMESTAMP,
    PRIMARY KEY (pid, vid)
);

-- Create Fact Table
CREATE TABLE Publication_Fact (
    id SERIAL PRIMARY KEY,
    reference_count INTEGER,
    score INTEGER,
    doi VARCHAR(255) REFERENCES Dim_Publication(doi),
    start_date TIMESTAMP
);

